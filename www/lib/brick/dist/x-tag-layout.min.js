!function(){function a(a,b){var c=b.__layoutScroll__=b.__layoutScroll__||Object.defineProperty(b,"__layoutScroll__",{value:{last:b.scrollTop}}).__layoutScroll__,d=b.scrollTop,e=a.scrollBuffer;return c.max=c.max||Math.max(d+e,e),c.min=c.min||Math.max(d-e,e),c}function b(a){a.setAttribute("content-maximizing",null)}function c(a){a.removeAttribute("content-maximized"),a.removeAttribute("content-maximizing")}function d(d){var e=d.currentTarget;if("scroll"==e.hideTrigger&&!d.currentTarget.hasAttribute("content-maximizing")){var f=d.target;if(e.scrollTarget?xtag.matchSelector(f,e.scrollTarget):f.parentNode==e){var g=f.scrollTop,h=e.scrollBuffer,i=a(e,f);g>i.last?i.min=Math.max(g-h,h):g<i.last&&(i.max=Math.max(g+h,h)),e.maxcontent||(g>i.max&&!e.hasAttribute("content-maximized")?b(e):g<i.min&&c(e)),i.last=g}}}xtag.register("x-layout",{events:{scroll:d,transitionend:function(a){var b=a.target;!this.hasAttribute("content-maximizing")||b.parentNode!=this||"header"!=b.nodeName.toLowerCase()&&"footer"!=b.nodeName.toLowerCase()||(this.setAttribute("content-maximized",null),this.removeAttribute("content-maximizing"))},"tap:delegate(section)":function(a){var d=a.currentTarget;"tap"!=d.hideTrigger||d.maxcontent||this.parentNode!=d||(d.hasAttribute("content-maximizing")||d.hasAttribute("content-maximized")?c(d):b(d))},mouseout:function(a){"hover"!=this.hideTrigger||this.maxcontent||this.hasAttribute("content-maximized")||a.relatedTarget&&this.contains(a.relatedTarget)||b(this)},mouseover:function(a){"hover"!=this.hideTrigger||this.maxcontent||!this.hasAttribute("content-maximized")&&!this.hasAttribute("content-maximizing")||this!=a.relatedTarget&&this.contains(a.relatedTarget)||c(this)}},accessors:{scrollTarget:{attribute:{name:"scroll-target"}},scrollBuffer:{attribute:{name:"scroll-buffer"},get:function(){return Number(this.getAttribute("scroll-buffer"))||80}},hideTrigger:{attribute:{name:"hide-trigger"}},maxcontent:{attribute:{"boolean":!0},set:function(a){a?b(this):this.hasAttribute("content-maximizing")||c(this)}}}})}();